#pragma once
#include <vector>
#include "util/pose.hpp"
#include "util/trajectory.hpp"

class TrajectoryGenerator {
    public:
        /**
         * @brief Generates a linearly spaced vector of doubles from start to end with num elements.
         * Each element is spaced evenly between start and end.
         * If num is 0, returns an empty vector.
         * 
         * @param start The starting value of the sequence.
         * @param end The ending value of the sequence.
         * @param num The number of elements in the sequence.
         * @return A vector of doubles containing the linearly spaced values.
         */
        static std::vector<double> linspace(float start, float end, int num);

        /**
         * @brief Generates a Hermite spline between two poses.
         * The spline is generated using the start and end poses, and the tangents are
         * calculated based on the orientation of the poses.
         * The function returns a vector of poses representing the spline.
         * 
         * A Hermite spline is a type of spline that is defined by a start point, an end point, and 
         *  the tangents (or derivatives) at those points. This allows for control of the robot's angle at
         *  the start and end of the spline.
         * 
         * The spline is defined by the following equation:
         * 
         *  P(t) = h00​(t) * P0​ + h10​(t) * M0 ​+ h01​(t) * P1 ​+ h11​(t) * M1​
         * 
         * where:
         * 
         *  h00(t) = 2t^3 - 3t^2 + 1
         * 
         *  h10(t) = t^3 - 2t^2 + t
         * 
         *  h01(t) = -2t^3 + 3t^2
         * 
         *  h11(t) = t^3 - t^2
         * 
         * P0 and P1 are the start and end poses, respectively.
         * M0 and M1 are the tangents at the start and end poses, respectively.
         * t is a parameter that varies from 0 to 1.
         * 
         * For more information on Hermite splines, see: https://en.wikipedia.org/wiki/Cubic_Hermite_spline
         * 
         * @param startPose The starting pose of the spline.
         * @param endPose The ending pose of the spline.
         * @param numPoints The number of points to generate along the spline. Default is 100.
         * @return A vector of poses representing the Hermite spline. Note that the heading of each pose is undefined.
        */
        static std::vector<Pose> generateHermiteSpline(Pose startPose, Pose endPose, int numPoints);

        /**
         * @brief Generates a trajectory through a series of waypoints.
         * The trajectory is generated by creating Hermite splines between each pair of waypoints.
         * The function returns a vector of poses representing the trajectory.
         * 
         * @param waypoints A vector of poses representing the waypoints.
         * @return A vector of poses representing the trajectory through the waypoints.
        */
        static Trajectory generateTrajectory(std::vector<Pose> waypoints);
};